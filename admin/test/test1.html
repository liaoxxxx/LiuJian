"<!DOCTYPE html>\r\n<html lang=\"zh-CN\">\r\n<head>\r\n    \r\n    <meta charset=\"utf-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n        <link href=\"\/system\/frame\/css\/bootstrap.min.css?v=3.4.0\" rel=\"stylesheet\">\r\n        <link href=\"\/static\/plug\/layui\/css\/layui.css\" rel=\"stylesheet\">\r\n    <link href=\"\/system\/css\/layui-admin.css\" rel=\"stylesheet\">\r\n    <link href=\"\/system\/frame\/css\/font-awesome.min.css?v=4.3.0\" rel=\"stylesheet\">\r\n    <link href=\"\/system\/frame\/css\/animate.min.css\" rel=\"stylesheet\">\r\n    <link href=\"\/system\/frame\/css\/style.min.css?v=3.0.0\" rel=\"stylesheet\">\r\n    <script src=\"\/system\/frame\/js\/jquery.min.js\"><\/script>\r\n    <script src=\"\/system\/frame\/js\/bootstrap.min.js\"><\/script>\r\n    <script src=\"\/static\/plug\/layui\/layui.all.js\"><\/script>\r\n    <script>\r\n        $eb = parent._mpApi;\r\n        window.controlle=\"setting._system_admin\";\r\n        window.module=\"admin\";\r\n    <\/script>\r\n\r\n\r\n\r\n    <title><\/title>\r\n    \r\n<!-- 全局js -->\r\n<script src=\"\/static\/plug\/echarts\/echarts.common.min.js\"><\/script>\r\n<script src=\"\/static\/plug\/echarts\/theme\/macarons.js\"><\/script>\r\n<script src=\"\/static\/plug\/echarts\/theme\/westeros.js\"><\/script>\r\n<style>\r\n    .box {\r\n        width: 0px;\r\n    }\r\n\r\n    .store-image {\r\n        height: 20px;\r\n        width: 20px;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .store-image img {\r\n        height: 20px;\r\n        width: 20px;\r\n    }\r\n\r\n    #map .ibox-title {\r\n        height: 60px;\r\n    }\r\n\r\n    #map-block {\r\n        overflow: hidden;\r\n        background-color: rgba(255, 255, 255, 0.86);\r\n    }\r\n\r\n    #map-container {\r\n        float: left;\r\n    }\r\n\r\n    #checkbox-container {\r\n        float: left;\r\n    }\r\n\r\n    #map .header-select {\r\n        width: 20%;\r\n        float: left;\r\n\r\n    }\r\n\r\n    #map .header-select:nth-child(2) {\r\n        margin-left: 300px;\r\n\r\n    }\r\n\r\n    #map .header-select select {\r\n        width: 200px;\r\n        height: 30px;\r\n        border-radius: 2px;\r\n        border: 1px solid darkgrey;\r\n        padding: 0 5px;\r\n    }\r\n\r\n    #map .header-select select option {\r\n        padding: 0 5px;\r\n    }\r\n\r\n    #map .check-group {\r\n        float: left;\r\n        width: 200px;\r\n        border: 1px solid darkgrey;\r\n        margin: 20px;\r\n        min-height: 300px;\r\n        padding: 10px;\r\n        background-color: #fff;\r\n        box-shadow: 0px 0px 5px grey;\r\n    }\r\n\r\n    #deliveryman-group .online {\r\n        background-color: #0089f1;\r\n        display: inline-block;\r\n        width: 16px;\r\n        height: 16px;\r\n        border: 2px solid rgba(90, 120, 150, 1.5);\r\n        border-radius: 8px;\r\n    }\r\n\r\n    #deliveryman-group .offline {\r\n        background-color: #59606f;\r\n        display: inline-block;\r\n        width: 16px;\r\n        height: 16px;\r\n        border: 2px solid rgba(230, 240, 240, 0.8);\r\n        border-radius: 8px;\r\n    }\r\n    #store-stat-group{\r\n        margin-left: 20px;\r\n    }\r\n    #store-stat-group>.style-column>div {\r\n        float: left;\r\n        margin-left: 10px;\r\n    }\r\n    #store-stat-group .style-circle{\r\n        display:inline-block ;\r\n        width: 10px;\r\n        height: 10px;\r\n        border-radius: 5px;\r\n    }\r\n    #store-stat-group .store-style-on{\r\n        background-color: #10a162;\r\n    }\r\n    #store-stat-group .store-style-off{\r\n        background-color: #ff6224;\r\n    }\r\n    #store-stat-group .store-column{\r\n        float: left;\r\n    }\r\n\r\n\r\n    #store-stat-group .deliveryman-column{\r\n        float: left;\r\n        margin-left: 20px;\r\n    }\r\n    #store-stat-group .deliveryman-style-on{\r\n        background-color: #0d8def;\r\n    }\r\n    #store-stat-group .deliveryman-style-off{\r\n        background-color: #575352;\r\n    }\r\n\r\n\r\n<\/style>\r\n\r\n    <!--<script type=\"text\/javascript\" src=\"\/static\/plug\/basket.js\"><\/script>-->\r\n<script type=\"text\/javascript\" src=\"\/static\/plug\/requirejs\/require.js\"><\/script>\r\n<script>\r\n    var hostname = location.hostname;\r\n    if(location.port) hostname += ':' + location.port;\r\n    requirejs.config({\r\n        map: {\r\n            '*': {\r\n                'css': '\/static\/plug\/requirejs\/require-css.js'\r\n            }\r\n        },\r\n        shim:{\r\n            'iview':{\r\n                deps:['css!iviewcss']\r\n            },\r\n            'layer':{\r\n                deps:['css!layercss']\r\n            }\r\n        },\r\n        baseUrl:'\/\/'+hostname+'\/',\r\n        paths: {\r\n            'static':'static',\r\n            'system':'system',\r\n            'vue':'static\/plug\/vue\/dist\/vue.min',\r\n            'axios':'static\/plug\/axios.min',\r\n            'iview':'static\/plug\/iview\/dist\/iview.min',\r\n            'iviewcss':'static\/plug\/iview\/dist\/styles\/iview',\r\n            'lodash':'static\/plug\/lodash',\r\n            'layer':'static\/plug\/layer\/layer',\r\n            'layercss':'static\/plug\/layer\/theme\/default\/layer',\r\n            'jquery':'static\/plug\/jquery\/jquery.min',\r\n            'moment':'static\/plug\/moment',\r\n            'sweetalert':'static\/plug\/sweetalert2\/sweetalert2.all.min',\r\n            'formCreate':'\/static\/plug\/form-create\/form-create.min',\r\n\r\n        },\r\n        basket: {\r\n            excludes:['system\/js\/index','system\/util\/mpVueComponent','system\/util\/mpVuePackage']\r\n\/\/            excludes:['system\/util\/mpFormBuilder','system\/js\/index','system\/util\/mpVueComponent','system\/util\/mpVuePackage']\r\n        }\r\n    });\r\n<\/script>\r\n<script type=\"text\/javascript\" src=\"\/system\/util\/mpFrame.js\"><\/script>\r\n    \r\n<\/head>\r\n<body class=\"gray-bg\">\r\n<div class=\"wrapper wrapper-content\">\r\n\r\n<div id=\"app\">\r\n    <div class=\"row\">\r\n        <div class=\"col-lg-12\">\r\n            <div class=\"ibox float-e-margins\">\r\n                <div class=\"ibox-title\">\r\n                    <h5>绑定门店<\/h5>\r\n                    <div class=\"pull-right\">\r\n                        <div class=\"btn-group\">\r\n                            <button type=\"button\" class=\"btn btn-xs btn-white\"\r\n                                    :class=\"{'active': active == 'thirtyday'}\" v-on:click=\"getlist('thirtyday')\">30天\r\n                            <\/button>\r\n                            <button type=\"button\" class=\"btn btn-xs btn-white\" :class=\"{'active': active == 'week'}\"\r\n                                    v-on:click=\"getlist('week')\">周\r\n                            <\/button>\r\n                            <button type=\"button\" class=\"btn btn-xs btn-white\" :class=\"{'active': active == 'month'}\"\r\n                                    v-on:click=\"getlist('month')\">月\r\n                            <\/button>\r\n                            <button type=\"button\" class=\"btn btn-xs btn-white\" :class=\"{'active': active == 'year'}\"\r\n                                    v-on:click=\"getlist('year')\">年\r\n                            <\/button>\r\n                        <\/div>\r\n                    <\/div>\r\n                <\/div>\r\n                <div class=\"ibox-content\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col-lg-9\">\r\n                            <div class=\"flot-chart-content echarts\" ref=\"order_echart\" id=\"flot-dashboard-chart1\"><\/div>\r\n                        <\/div>\r\n                        <div class=\"col-lg-3\">\r\n                            <ul class=\"stat-list\">\r\n                                <li>\r\n                                    <h2 class=\"no-margins \">{{pre_cycleprice}}<\/h2>\r\n                                    <small>{{precyclename}}销售额<\/small>\r\n                                <\/li>\r\n                                <li>\r\n                                    <h2 class=\"no-margins \">{{cycleprice}}<\/h2>\r\n                                    <small>{{cyclename}}销售额<\/small>\r\n                                    <div class=\"stat-percent text-navy\" v-if='cycleprice_is_plus ===1'>\r\n                                        {{cycleprice_percent}}%\r\n                                        <i class=\"fa fa-level-up\"><\/i>\r\n                                    <\/div>\r\n                                    <div class=\"stat-percent text-danger\" v-else-if='cycleprice_is_plus === -1'>\r\n                                        {{cycleprice_percent}}%\r\n                                        <i class=\"fa fa-level-down\"><\/i>\r\n                                    <\/div>\r\n                                    <div class=\"stat-percent\" v-else>\r\n                                        {{cycleprice_percent}}%\r\n                                    <\/div>\r\n                                    <div class=\"progress progress-mini\">\r\n                                        <div :style=\"{width:cycleprice_percent+'%'}\" class=\"progress-bar box\"><\/div>\r\n                                    <\/div>\r\n                                <\/li>\r\n                                <li>\r\n                                    <h2 class=\"no-margins \">{{pre_cyclecount}}<\/h2>\r\n                                    <small>{{precyclename}}订单总数<\/small>\r\n                                <\/li>\r\n                                <li>\r\n                                    <h2 class=\"no-margins\">{{cyclecount}}<\/h2>\r\n                                    <small>{{cyclename}}订单总数<\/small>\r\n                                    <div class=\"stat-percent text-navy\" v-if='cyclecount_is_plus ===1'>\r\n                                        {{cyclecount_percent}}%\r\n                                        <i class=\"fa fa-level-up\"><\/i>\r\n                                    <\/div>\r\n                                    <div class=\"stat-percent text-danger\" v-else-if='cyclecount_is_plus === -1'>\r\n                                        {{cyclecount_percent}}%\r\n                                        <i class=\"fa fa-level-down\"><\/i>\r\n                                    <\/div>\r\n                                    <div class=\"stat-percent \" v-else>\r\n                                        {{cyclecount_percent}}%\r\n                                    <\/div>\r\n                                    <div class=\"progress progress-mini\">\r\n                                        <div :style=\"{width:cyclecount_percent+'%'}\" class=\"progress-bar box\"><\/div>\r\n                                    <\/div>\r\n                                <\/li>\r\n\r\n\r\n                            <\/ul>\r\n                        <\/div>\r\n                    <\/div>\r\n                <\/div>\r\n                <div id=\"store-group\" class=\"check-group\">\r\n                    <label for=\"\">城市门店<\/label>\r\n                    <hr>\r\n                    <div v-for=\"item in storeList\">\r\n                        <label for=\"\">{{item.name}}<\/label>\r\n                        <input type=\"checkbox\" :checked=\"item.check\" @click=\"checkStore(item)\">\r\n                    <\/div>\r\n\r\n                <\/div>\r\n                <div>\r\n                    <button @click=\"submit()\">提交<\/button>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>\r\n\r\n\r\n\r\n\r\n\r\n<script>\r\n    require(['vue', 'axios', 'layer'], function (Vue, axios, layer) {\r\n        new Vue({\r\n            el: \"#app\",\r\n            data: {\r\n                option: {},\r\n                myChart: {},\r\n                active: 'thirtyday',\r\n                cyclename: '最近30天',\r\n                precyclename: '上个30天',\r\n                cyclecount: 0,\r\n                cycleprice: 0,\r\n                cyclecount_percent: 0,\r\n                cycleprice_percent: 0,\r\n                cyclecount_is_plus: 0,\r\n                cycleprice_is_plus: 0,\r\n                pre_cyclecount: 0,\r\n                pre_cycleprice: 0,\r\n                storeList : [\r\n                    {\r\n                        add_time: \"2020-08-04 23:39:15\",\r\n                        address: \"广西,南宁,兴宁区\",\r\n                        day_time: \"07:00:00 - 23:30:00\",\r\n                        detailed_address: \"明秀东路178号\",\r\n                        id: 1,\r\n                        image: \"http:\/\/kaifa.crmeb.net\/uploads\/attach\/2019\/08\/13\/26b2896f313fb594884fb992e33c5fa8.jpg\",\r\n                        introduction: \"点点酒兴宁店\",\r\n                        latitude: \"22.851907\",\r\n                        longitude: \"108.330107\",\r\n                        name: \"点点酒 兴宁店\",\r\n                        phone: \"18676684597\",\r\n                        status: 1,\r\n                    },\r\n                ],\r\n            },\r\n            methods: {\r\n                getAllStore(){\r\n                    console.log(\"methods: getCityList\")\r\n                    let that = this;\r\n                    axios.get('\/admin\/system.SystemStore\/store_list').then((res) => {\r\n                        res=res.data\r\n\r\n                        if (res.code===0){\r\n                            that.storeList  =res.data\r\n                        }\r\n                    });\r\n                },\r\n                checkStore:function(storeItem){\r\n                    \/\/处理门店站点列表\r\n                    for (let storekey in this.storeList) {\r\n                        if (this.storeList[storekey].id === storeItem.id) {\r\n                            this.storeList[storekey].check = this.storeList[storekey].check !== true;\r\n                        }\r\n                    }\r\n                    \/\/处理门店站点id列表\r\n                    this.storeIdList=Array.from( new Set(this.storeIdList))  \/\/去重\r\n                    let hasIndex=this.storeIdList.indexOf(storeItem.id)\r\n                    if (hasIndex===-1){\r\n                        this.storeIdList.push(storeItem.id)\r\n                    }else {\r\n                        this.storeIdList.splice(hasIndex,1)\r\n                    }\r\n                },\r\n\r\n                submit:function () {\r\n                    let that = this;\r\n                    axios.post('\/admin\/setting.SystemAdmin\/bindStore',{storeList:this.storeList}).then((res) => {\r\n                        res=res.data\r\n\r\n                        if (res.code===0){\r\n                            that.storeList  =res.data\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n            mounted: function () {\r\n               this.getAllStore()\r\n            }\r\n        });\r\n    })\r\n\r\n<\/script>\r\n\r\n\r\n\r\n<\/div>\r\n<\/body>\r\n<\/html>\r\n"